
name: cloudmask-rivanna

sbatch:
  time: "6:00:00"
  mode: h
  dir: scratch

system:
  host: "rivanna"
  python: "3.10.8"
  num_cpus: 1
  platform: rivanna
  accelerators_per_node: 1
  constraint: ""
  reservation: ""

run:
  fit-verbose: 1
  host: ubuntu
  target: rivanna-singularity
  filesystem: "/scratch/thf2bn"
  venvpath: "/scratch/thf2bn/ENV3/bin/python"
  datadir: data
  branch: 'main'

# Submission Information
submission:
  name: cloudmask
  submitter: Gregor von Laszewski
  email: laszewski@gmail.com
  org: University of Virginia
  division: open
  version: mlcommons-cloudmask-v2.0
  github_commit_version: TBD
  status: completed
  platform: rivanna
  accelerators_per_node: 1


benchmark:
  name: Osmi
  user: Gregor von Laszewski
  e-mail: laszewski@gmail.com
  organisation: University of Virginia
  division: closed
  status: completed
  platform: rivanna

experiment:
  server: "localhost"
#  card_name: "a100" # "v100,p100"
  card_name: "a100,v100" # "v100,p100"
  # batch: "1,2,4,8,16,32,64,128,256,512,1024"
  batch: "1"
  nrequests: "32768"
  ngpus: "1"
  concurrency: "1"
  ports: "8500"
  model: "small_lstm"
  #model: "small_lstm,medium_cnn,large_tcnn"

# config:
#   server: "localhost"
#   gpu: "A100" #"V100-SXM2-32GB"
#   batch: [1,2,4,8,16,32,64,128,256,512,1024]
#   nrequests: [32768]
#   ngpus: [1]
#   concurrency: [1,2,4,6,8]
#   ports: [8500]
#   model: ["small_lstm","medium_cnn","large_tcnn"]

user: "gregor" # "{os.USER}"

project:
  #user: "/project/bii_dsc_community/{user}" #BUG
  user: "/project/bii_dsc_community/gregor"
  osmi_bench: "/project/bii_dsc_community/{user}/osmi/osmi-bench"

model_config_list:
  small_lstm:
    base_path: "{project.user}/osmi/osmi-bench/models/small_lstm"
    model_platform: "tensorflow"
  medium_cnn:
    base_path: "{project.user}/osmi/osmi-bench/models/medium_cnn"
    model_platform: "tensorflow"
  large_tcnn:
    base_path: "{project.user}/osmi/osmi-bench/models/large_tcnn"
    model_platform: "tensorflow"

